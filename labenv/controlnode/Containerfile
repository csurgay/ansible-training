FROM fedora:latest

# Doesn't install ansible, first excersice will

RUN dnf install -y \
    openssh-clients \
    sshd \
    openssh-server \
    passwd \
    ip \
    tree \
    vim \
    ping \
    sshpass \
    podman \
    python3 \
    python3-dnf && \
    dnf clean all && \
    echo "root:root" | chpasswd && \
    ssh-keygen -A

COPY ssh_config /etc/ssh/
COPY sshd_config /etc/ssh/

RUN mkdir -p /var/run/sshd

EXPOSE 22

CMD ["/usr/sbin/sshd", "-D"]

